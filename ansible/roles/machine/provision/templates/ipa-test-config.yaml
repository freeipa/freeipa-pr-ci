ad_admin_name: Administrator
ad_admin_password: Secret123
admin_name: admin
admin_password: Secret.123
debug: false
dirman_dn: cn=Directory Manager
dirman_password: Secret.123
dns_forwarder: {{ dns_server.stdout }}
domains:
- hosts:
{% for host in groups['all'] %}
{% if host.startswith('master') or host.startswith('replica') or host.startswith('client') %}
    - external_hostname: {{ hostvars[host]['inventory_hostname'] }}.ipa.test
      name: {{ hostvars[host]['inventory_hostname'] }}.ipa.test
      ip: {{ hostvars[host]['ansible_default_ipv4']['address'] }}
{% if host.startswith('master') %}
      role: master
{% endif %}
{% if host.startswith('replica') %}
      role: replica
{% endif %}
{% if host.startswith('client') %}
      role: client
{% endif %}
{% endif %}
{% endfor %}
  name: ipa.test
  type: IPA
{% if groups['all']|select('startswith', 'ad') %}
- name: ad.test
  type: AD
  hosts:
    - external_hostname: ad.test
      ip: {{ hostvars['ad-root']['ansible_ip_addresses']|ipv4|first }}
      name: ad.test
      role: ad
- name: child.ad.test
  type: AD_SUBDOMAIN
  hosts:
    - external_hostname: child.ad.test
      ip: {{ hostvars['ad-child']['ansible_ip_addresses']|ipv4|first }}
      name: child.ad.test
      role: ad_subdomain
- name: ad2.test
  type: AD_TREEDOMAIN
  hosts:
    - external_hostname: ad2.test
      ip: {{ hostvars['ad-tree']['ansible_ip_addresses']|ipv4|first }}
      name: ad2.test
      role: ad_treedomain
{% endif %}
nis_domain: ipatest
ntp_server: 1.pool.ntp.org
root_ssh_key_filename: /root/.ssh/freeipa_pr_ci_insecure
test_dir: /ipatests
